(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{6251:function(e,r,t){Promise.resolve().then(t.bind(t,16))},16:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var a=t(7437),o=t(1221),l=t(6691),i=t.n(l),s=t(1396),n=t.n(s),d=t(2265);function c(){let{cart:e,removeFromCart:r,updateQuantity:t,total:l}=(0,o.useCart)(),[s,c]=(0,d.useState)(!1),u=async()=>{console.log("\uD83D\uDED2 Iniciando checkout..."),console.log("\uD83D\uDED2 Carrito:",e),c(!0);try{console.log("\uD83D\uDCE1 Enviando petici\xf3n a /api/checkout...");let r=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e.map(e=>({id:e.id,name:e.name,price:e.price,quantity:e.quantity,image:e.image}))})});console.log("\uD83D\uDCE1 Respuesta recibida:",r.status);let t=await r.json();console.log("\uD83D\uDCE1 Data:",t),t.url?(console.log("✅ Redirigiendo a Stripe:",t.url),window.location.href=t.url):(console.error("❌ No se recibi\xf3 URL de Stripe:",t),alert("Error: No se recibi\xf3 URL de pago"))}catch(e){console.error("❌ Error al procesar el pago:",e),alert("Error al procesar el pago. Por favor, int\xe9ntalo de nuevo.")}finally{c(!1)}};return 0===e.length?(0,a.jsxs)("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-12 relative overflow-hidden transition-colors duration-300",children:[(0,a.jsx)("div",{className:"absolute top-10 right-20 w-64 h-64 bg-purple-200/15 rounded-full blur-3xl"}),(0,a.jsx)("div",{className:"absolute bottom-10 left-20 w-72 h-72 bg-pink-200/15 rounded-full blur-3xl"}),(0,a.jsx)("div",{className:"container mx-auto px-4 relative z-10",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-12 text-center max-w-2xl mx-auto border border-purple-100 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"text-7xl mb-6 animate-bounce",children:"\uD83D\uDED2"}),(0,a.jsx)("h2",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4",children:"Tu carrito est\xe1 vac\xedo"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg mb-8",children:"\xa1A\xf1ade algunos posters incre\xedbles a tu colecci\xf3n!"}),(0,a.jsx)(n(),{href:"/",className:"inline-block bg-gradient-to-r from-purple-600 to-pink-600 text-white px-10 py-4 rounded-full font-bold hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105 shadow-xl hover:shadow-2xl",children:"✨ Explorar productos"})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-12 relative overflow-hidden transition-colors duration-300",children:[(0,a.jsx)("div",{className:"absolute top-10 right-20 w-64 h-64 bg-purple-200/15 rounded-full blur-3xl"}),(0,a.jsx)("div",{className:"absolute bottom-10 left-20 w-72 h-72 bg-pink-200/15 rounded-full blur-3xl"}),(0,a.jsxs)("div",{className:"container mx-auto px-4 relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,a.jsx)("span",{className:"text-5xl",children:"\uD83D\uDED2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Tu Carrito"}),(0,a.jsx)("div",{className:"h-1.5 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full mt-2 w-32"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-purple-100 dark:border-gray-700",children:e.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-6 border-b last:border-b-0 hover:bg-gradient-to-r hover:from-purple-50 hover:to-pink-50 transition-all duration-300",children:[(0,a.jsx)("div",{className:"relative w-24 h-24 flex-shrink-0",children:(0,a.jsx)(i(),{src:e.image,alt:e.name,fill:!0,className:"object-cover rounded"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.name}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e.description}),(0,a.jsxs)("p",{className:"text-purple-600 dark:text-purple-400 font-semibold mt-1",children:["€",e.price.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>t(e.id,e.quantity-1),className:"w-9 h-9 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full hover:from-indigo-200 hover:to-purple-200 transition-all font-bold text-indigo-700 shadow-md hover:shadow-lg transform hover:scale-110",children:"-"}),(0,a.jsx)("span",{className:"w-14 text-center font-bold text-lg text-indigo-700 dark:text-purple-400",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>t(e.id,e.quantity+1),className:"w-9 h-9 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full hover:from-indigo-200 hover:to-purple-200 transition-all font-bold text-indigo-700 shadow-md hover:shadow-lg transform hover:scale-110",children:"+"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:["€",(e.price*e.quantity).toFixed(2)]}),(0,a.jsx)("button",{onClick:()=>r(e.id),className:"text-red-500 dark:text-red-400 text-sm hover:text-red-700 dark:hover:text-red-300 mt-2",children:"Eliminar"})]})]},e.id))})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-white to-purple-50 dark:from-gray-800 dark:to-gray-900 rounded-2xl shadow-xl p-6 sticky top-24 border-2 border-purple-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-6",children:"\uD83D\uDCDD Resumen del pedido"}),(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between text-gray-600 dark:text-gray-300",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{children:["€",l.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-600 dark:text-gray-300",children:[(0,a.jsx)("span",{children:"Env\xedo"}),(0,a.jsx)("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:"GRATIS"})]}),(0,a.jsxs)("div",{className:"border-t pt-3 flex justify-between text-xl font-bold text-gray-800 dark:text-gray-100",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["€",l.toFixed(2)]})]})]}),(0,a.jsxs)("button",{onClick:u,disabled:s,className:"w-full bg-gradient-to-r from-indigo-600 via-purple-600 to-violet-600 text-white py-4 rounded-full font-bold text-lg hover:from-indigo-700 hover:to-violet-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed shadow-xl hover:shadow-2xl hover:shadow-indigo-300/50 relative overflow-hidden group",children:[(0,a.jsx)("span",{className:"relative z-10",children:s?"⏳ Procesando...":"✨ Proceder al pago \uD83D\uDD12"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-600 to-purple-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,a.jsx)("p",{className:"text-center text-gray-500 text-sm mt-4",children:"Pago seguro con Stripe"}),(0,a.jsx)(n(),{href:"/",className:"block text-center text-purple-600 hover:text-purple-800 mt-4",children:"← Seguir comprando"})]})})]})]})]})}},1221:function(e,r,t){"use strict";t.r(r),t.d(r,{CartProvider:function(){return i},useCart:function(){return s}});var a=t(7437),o=t(2265);let l=(0,o.createContext)(void 0);function i(e){let{children:r}=e,[t,i]=(0,o.useState)([]),s=e=>{i(r=>r.filter(r=>r.id!==e))},n=t.reduce((e,r)=>e+r.price*r.quantity,0);return(0,a.jsx)(l.Provider,{value:{cart:t,addToCart:e=>{i(r=>r.find(r=>r.id===e.id)?r.map(r=>r.id===e.id?{...r,quantity:r.quantity+1}:r):[...r,{...e,quantity:1}])},removeFromCart:s,updateQuantity:(e,r)=>{if(r<=0){s(e);return}i(t=>t.map(t=>t.id===e?{...t,quantity:r}:t))},clearCart:()=>{i([])},total:n},children:r})}function s(){let e=(0,o.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[986,396,971,938,744],function(){return e(e.s=6251)}),_N_E=e.O()}]);